import{x as E,y as P,a as u,d as b,o as A,h as V,l as w,w as m,b as p,t as _,u as l,B as C,g as S,X as g,H as J,e as B,z as L}from"./index-DednGyhX.js";import{f as h,n as D}from"./utils-DBKh7t1p.js";const I={ref:"confirmRef",class:"nue-confirm"},R={class:"nue-confirm__header"},Y={class:"nue-confirm__content"},z={class:"nue-confirm__footer"},G=b({name:"NueConfirmNodeInner",__name:"confirm",props:{title:{default:"Confirm"},content:{},confirmButtonText:{default:"Yes"},cancelButtonText:{default:"No"},close:{}},setup(e){return(s,a)=>(A(),V("div",I,[w("div",R,[u(l(C),null,{default:m(()=>[p(_(s.title),1)]),_:1}),u(l(g),{icon:"clear",theme:"pure",onClick:a[0]||(a[0]=S(d=>s.close(!1),["stop"]))})]),w("div",Y,[u(l(C),null,{default:m(()=>[p(_(s.content),1)]),_:1})]),w("div",z,[u(l(g),{onClick:a[1]||(a[1]=S(d=>s.close(!1),["stop"]))},{default:m(()=>[p(_(s.cancelButtonText),1)]),_:1}),u(l(g),{theme:"primary",onClick:a[2]||(a[2]=S(d=>s.close(!0),["stop"]))},{default:m(()=>[p(_(s.confirmButtonText),1)]),_:1})])],512))}});function H(e){const s=E(e.wrapperId);return new Promise((a,d)=>{const c=document.createElement("div");c.classList.add("nue-confirm-wrapper"),s.appendChild(c),P(u(G,{...e,close:v=>{c.dataset.leaving="true",v?a(!0):d(!1),setTimeout(()=>{s.removeChild(c)},240)}}),c)})}const X=H,N="@todos",q=J("todoStore",()=>{const e=B([]),s=B();function a(t,o,r){const i=new Date().toString();return{id:D(),projectId:t,name:o,description:"",status:r,progress:{total:0,finished:0},createdAt:i,updatedAt:i,tags:[]}}function d(t,o,r){return new Promise((i,n)=>{if(t=t.trim(),o=o.trim(),t==="")n("Project id cannot be empty");else if(o==="")n("Todo name cannot be empty");else{const f=a(t,o,r);h(e.value,O=>O.name===f.name)?n("Todo already exists"):(e.value.push(f),i(f))}})}function c(t){return new Promise((o,r)=>{const i=h(e.value,n=>n.id===t);if(i){const n=e.value.indexOf(i);if(n>=0){const T=i.status==="done"?"todo":"done";e.value[n].status=T,o(T)}else r("Todo not found")}else r("Todo not found")})}function v(t){return new Promise((o,r)=>{const i=h(e.value,n=>n.id===t);if(i){const n=e.value.indexOf(i);n>=0?(e.value.splice(n,1),o(i)):r("Todo not found")}else r("Todo not found")})}function x(t){return e.value.filter(o=>t(o))}function k(){const t=localStorage.getItem(N);if(t){const o=JSON.parse(t);e.value=o}return{filter:x}}function y(){const t=JSON.stringify(e.value);localStorage.setItem(N,t)}return L(()=>e.value,()=>y(),{deep:!0}),{todos:e,selectedTodoId:s,create:d,remove:v,filter:x,read:k,check:c}});export{X as J,q as u};
